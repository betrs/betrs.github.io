





<!doctype html>
<html lang="">

<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" 
src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js">
</script>
<link href=  "/plugins/code-theme/tomorrow-night.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" href="/plugins/github-markdown.css">

<head>
  <meta charset="UTF-8">
  
    
    
      <link rel="stylesheet" href="/css/legend.css">
    
  
</head>

<body id="body-x">
<div id="layout-content">
  <div id="menu-outer-x">
  <div id="menu-inner">
    
    
    <div id="site-title">
      吴佳博客
    </div>
    

     
    <div>
    
      
      <a href="/">首页</a>
      
    
      
      <a href="/archives">归档</a>
      
    
    </div>
  </div>
</div> 
  <div id="content-outer">
    <div id="content-inner">
      
      
  <article class="markdown-body">
    <h1 id="post-title">一些好用的JQuery技巧
       
        <div id="post-time" datetime="2016-10-14T10:10:16.000Z">
          2016-10-14
        </div>
      
    </h1>
    <p>#一、返回顶部按钮</p>
<p>通过使用jQuery中的animate 和scrollTop 方法，不用插件就可以创建一个滚动到顶部的简单动画：</p>
<pre><code>// Back to top
$(&apos;.top&apos;).click(function (e) {
e.preventDefault();
$(&apos;html, body&apos;).animate({scrollTop: 0}, 800);
});
&lt;!-- Create an anchor tag --&gt;
&lt;a class=&quot;top&quot; href=&quot;#&quot;&gt;Back to top&lt;/a&gt;
</code></pre><p>改变scrollTop 的值可以更改你想要放置滚动条的位置。所有你真正需要做的是在800毫秒的时间内设置文档主体的动画，直到它滚动到文档的顶部。<br>注：小心scrollTop的一些错误行为。</p>
<p>#二、预加载图像</p>
<p>如果你的网页要使用大量开始不可见的（例如，悬停的）图像，那么可以预加载这些图像：</p>
<pre><code>$.preloadImages = function () {
    for (var i = 0; i &lt; arguments.length; i++) {
        $(&apos;&lt;img&gt;&apos;).attr(&apos;src&apos;, arguments[i]);
    }
};
$.preloadImages(&apos;img/hover-on.png&apos;, &apos;img/hover-off.png&apos;);
</code></pre><a id="more"></a>
<p>#三、检查图像是否加载</p>
<p>有时为了继续脚本，你可能需要检查图像是否全部加载完毕：</p>
<pre><code>$(&apos;img&apos;).load(function () {
    console.log(&apos;image load successful&apos;);
});
</code></pre><p>你也可以用ID或类替换<img>标签来检查某个特定的图像是否被加载。</p>
<p>#四、自动修复破坏的图像</p>
<p>逐个替换已经破坏的图像链接是非常痛苦的。不过，下面这段简单的代码可以帮助你：</p>
<pre><code>$(&apos;img&apos;).on(&apos;error&apos;, function () {
    if(!$(this).hasClass(&apos;broken-image&apos;)) {
    $(this).prop(&apos;src&apos;, &apos;img/broken.png&apos;).addClass(&apos;broken-image&apos;);
    }
});
</code></pre><p>即使没有任何断掉的链接，加上这一段代码也不会让你有任何损失。</p>
<p>#五、悬停切换类</p>
<p>假设你希望当用户将鼠标悬停在可点击的元素上时，它会改变颜色。那么你可以在用户悬停的时候添加类到元素中，反之则删除类：</p>
<pre><code>$(&apos;.btn&apos;).hover(function () {
    $(this).addClass(&apos;hover&apos;);
}, function () {
    $(this).removeClass(&apos;hover&apos;);
});
</code></pre><p>你只需要添加必要的CSS即可。更简单的方法是使用toggleClass 方法：</p>
<pre><code>$(&apos;.btn&apos;).hover(function () {
    $(this).toggleClass(&apos;hover&apos;);
});
</code></pre><p>注：可能在这种情况下，CSS这种解决方案更快，不过了解这个方法很有必要。</p>
<p>#六、禁用输入字段</p>
<p>有时候，你可能想要禁用表格的提交按钮或它的某一项文字输入直到用户执行了特定操作（例如，勾选“我已阅读相关条款”复选框）。添加 disabled属性到你的输入就可以在你想要的时候才启用它：</p>
<pre><code>$(&apos;input[type=&quot;submit&quot;]&apos;).prop(&apos;disabled&apos;, true);
</code></pre><p>然后你只需要运行输入的prop 方法就可以了，不过disabled 的值要设置为false：</p>
<pre><code>$(&apos;input[type=&quot;submit&quot;]&apos;).prop(&apos;disabled&apos;, false);
</code></pre><p>#七、停止加载链接</p>
<p>有时候，你既不需要链接到某个特定的网页，也不想要重新加载页面——你可能希望链接做点别的事情，例如说触发一些其他脚本。这就要在阻止默认动作上做文章了：</p>
<pre><code>$(&apos;a.no-link&apos;).click(function (e) {
    e.preventDefault();
});
</code></pre><p>#八、淡入/滑动切换</p>
<p>滑动和淡入都是我们用jQuery做动画的时候大量运用的东西。如果你只是想在用户点击之后展示一个元素的话，那么用fadeIn 和slideDown 方法就很完美。但是，如果你想要元素在第一次点击的时候出现，然后在第二次点击的时候消失的话，那么可以试试下面的代码：</p>
<pre><code>// Fade
$(&apos;.btn&apos;).click(function () {
    $(&apos;.element&apos;).fadeToggle(&apos;slow&apos;);
});

// Toggle
$(&apos;.btn&apos;).click(function () {
    $(&apos;.element&apos;).slideToggle(&apos;slow&apos;);
});
</code></pre><p>#九、简单的手风琴</p>
<p>这是一个可快速生成手风琴的简单方法：</p>
<pre><code>// Close all panels
$(&apos;#accordion&apos;).find(&apos;.content&apos;).hide();

// Accordion
$(&apos;#accordion&apos;).find(&apos;.accordion-header&apos;).click(function () {
    var next = $(this).next();
    next.slideToggle(&apos;fast&apos;);
    $(&apos;.content&apos;).not(next).slideUp(&apos;fast&apos;);
    return false;
});
</code></pre><p>通过添加这个脚本，你真正需要做的仅仅是在页面上添加必要的HTML元素，这样它就可以运行工作了。</p>
<p>#十、让两个div高度相同</p>
<p>有时候，你需要让两个div无论包含什么内容都拥有相同的高度：</p>
<pre><code>$(&apos;.div&apos;).css(&apos;min-height&apos;, $(&apos;.main-div&apos;).height());
</code></pre><p>设置 min-height，这意味着它可以比主div大但绝对不能比主div小。不过，还有一种更灵活的方法是遍历一组元素，然后将高度设置为最高的那个元素的高度：</p>
<pre><code>var $columns = $(&apos;.column&apos;);
var height = 0;
$columns.each(function () {
    if ($(this).height() &gt; height) {
        height = $(this).height();
    }
});
$columns.height(height);
</code></pre><p>如果你希望所有列的高度相同：</p>
<pre><code>var $rows = $(&apos;.same-height-columns&apos;);
$rows.each(function () {
$(this).find(&apos;.column&apos;).height($(this).height());
});
</code></pre><p>#十一、在新标签页/窗口打开外部链接</p>
<p>在一个新的浏览器tab或窗口中打开外部链接，并确保同一个来源的链接能在同一个tab或者窗口中打开：</p>
<pre><code>$(&apos;a[href^=&quot;http&quot;]&apos;).attr(&apos;target&apos;, &apos;_blank&apos;);
$(&apos;a[href^=&quot;//&quot;]&apos;).attr(&apos;target&apos;, &apos;_blank&apos;);
$(&apos;a[href^=&quot;&apos; + window.location.origin + &apos;&quot;]&apos;).attr(&apos;target&apos;, &apos;_self&apos;);
</code></pre><p>注意：window.location.origin 在IE10中无效。修复的时候要小心这个问题。</p>
<p>#十二、通过文本查找元素<br>通过使用jQuery中的contains() 选择器，你可以找到元素内容的文本。如果文本不存在，那就隐藏该元素：</p>
<pre><code>var search = $(&apos;#search&apos;).val();
$(&apos;div:not(:contains(&quot;&apos; + search + &apos;&quot;))&apos;).hide();
13、在改变Visibility时触发
</code></pre><p>当用户不再关注某个tab，或重新聚焦原来的那个tab上时，触发JavaScript：</p>
<pre><code>$(document).on(&apos;visibilitychange&apos;, function (e) {
    if (e.target.visibilityState === &quot;visible&quot;) {
        console.log(&apos;Tab is now in view!&apos;);
    } else if (e.target.visibilityState === &quot;hidden&quot;) {
        console.log(&apos;Tab is now hidden!&apos;);
    }
});
</code></pre><p>#十三、AJAX调用错误处理</p>
<p>当Ajax调用返回404或500错误时，就执行错误处理程序。如果没有定义处理程序，其他的jQuery代码或会就此罢工。定义一个全局的Ajax错误处理程序：</p>
<pre><code>$(document).ajaxError(function (e, xhr, settings, error) {
    console.log(error);
});
</code></pre><p>#十四、链式插件调用</p>
<p>jQuery允许“链式”插件的方法调用，以减轻反复查询DOM并创建多个jQuery对象的过程。比方说，下面的代码片段代表了你的插件方法调用：</p>
<pre><code>$(&apos;#elem&apos;).show();
$(&apos;#elem&apos;).html(&apos;bla&apos;);
$(&apos;#elem&apos;).otherStuff();
</code></pre><p>通过使用链式，可以大大改善：</p>
<pre><code>$(&apos;#elem&apos;)
.show()
.html(&apos;bla&apos;)
.otherStuff();
</code></pre><p>还有一种方法是在（前缀$）变量中高速缓存元素：</p>
<pre><code>var $elem = $(&apos;#elem&apos;);
$elem.hide();
$elem.html(&apos;bla&apos;);
$elem.otherStuff();
</code></pre><p>链式和高速缓存的方法都是jQuery中可以让代码变得更短和更快的代最佳做法。</p>

  </article>

  
    
    
      <div id="page-prev-next">
        
        
          <a id="page-prev-a" href="/2016/10/18/datatype/"> ← jQuery的14个数据类型 </a>
        

        
        
          <a id="page-next-a" href="/2016/10/14/console/"> Js调试工具，万能的Console → </a>
        
      </div>
    
    
    
    
      
      <div id="play-button"  style="background-color: #6d5aca; border: solid 2px #6d5aca;">
  <img id="play-img" src="/images/playback_play.png"></img>
</div>
<audio id="bgaudio" loop="loop" preload="none"> 
  <source src=http://cdn.calm.com/scenes/scene-Qqkzy9k7Eo.m4a?v=1418162240715 type="audio/mpeg">
</audio>

<script>
$(document).ready(function(){
  //播放按钮点击
  var audio = $("#bgaudio")[0];
  var img = $("#play-img")[0];
  $("#play-button").click(function(){ 
    if (audio.paused || audio.ended) {
      audio.play();
      img.src = "/images/playback_pause.png";
    } else {
      audio.pause();
      img.src = "/images/playback_play.png";
    }
  });
});
</script>
    

    
    

  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div id="reward_comment">文章对我有帮助，打赏作者</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.png" alt="吴佳 WeChat Pay"/>
          <p>微信</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay.png" alt="吴佳 Alipay"/>
          <p>支付宝</p>
        </div> 
      
    </div>
  </div>


  

    </div>

    <!-- 多说评论框 -->    
    
      <div class="ds-thread" data-thread-key="2016/10/14/JqSkill/" data-title="一些好用的JQuery技巧" data-url="http://yoursite.com/2016/10/14/JqSkill/"></div>
    
  </div>
</div>

<div id="bottom-outer">
  
  <div id="bottom-inner">
    吴佳 
    ©2016 |Powered by  
    <a href="http://hexo.io" target="_blank">Hexo</a> with theme 
    <a href="https://github.com/iHongRen/legend" target="_blank">legend</a>
  </div>
    
    
    
      <a href="/atom.xml">
      
      <img src=/images/rss.png height="18" width="18">
      
</div> 


  
  
    <script src="/js/legend.js"></script>
  


</body>
</html>



  
<script type="text/javascript">
var duoshuoQuery = {short_name:"ihongren"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>



<script>
$(window).on('load', function(){
   $('pre').addClass('prettyprint').attr('style', 'overflow:auto;');
   prettyPrint();
 });
</script>

